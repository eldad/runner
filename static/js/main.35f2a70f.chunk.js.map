{"version":3,"sources":["Dom_html.re","CanvasSprite.re","CanvasBackgroundImage.re","CanvasData.re","GameState.re","CanvasRender.re","App.re","serviceWorker.js","index.re"],"names":["$$document","keyboardEventKey","keyboardEvent","key","fillStyle","context","fillStyle$1","setFont","font","measureTextWidth","text","measureText","width","createImgFromSrc","src","img","createElement","blitImage","sx","sy","dx","dy","w","h","drawImage","make","height","frames","$staropt$star","param","align","undefined","render","viewport_h","sprite","x","y","frame","caml_int32","CanvasBackgroundImage_make","CanvasBackgroundImage_render","bgimage","viewport_width","viewport_height","offset","sw","Math","min","bg","pavement","distantstreet","powerlines","fgstreet","greenbob","greenbobjump","crate","pavement_height","random","player_collision_x2","initialState","block","resetState","state","init","localStorageState","highscore","js_option","caml_format","js_primitive","localStorage","getItem","checkGameOver","match","tag","match$1","max","setItem","String","localStorageSaveState","handleTick","delta_t","length","last_distance","_for","_for_finish","distance","push","generateObstacles","score","caml_array","shift","updateObstacles","collision","array","o","js_math","checkCollision","state$1","player_velocity","y_delta","player_y","t","impulse","player_velocity$1","y_delta$1","player_y$1","player_jumping","time","updatePlayer","handleKeyDown","handleKeyUp","parallax","plane_index","lagfactor","render_banner","modifier","curry","printf","text_width","text_xpos","fillRect","color_intensity","fillText","render_score","points","CanvasRender_render","data","clearRect","bgscroll","player_sprite","player_frame","pos","relative_pos","match$2","match$3","match$4","match$5","render_highscore","App_initialState","component","ReasonReact","isLocalhost","Boolean","window","location","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","__webpack_require__","ReactDOMRe","self","intervalId","setInterval","clearInterval","keydown","e","repeat","addEventListener","removeEventListener","keyup","oldAndNewSelf","canvasId","c","getContext","getElementById","requestAnimationFrame","_f","tmp","react","tmp$1","className","glamor","onClick","_e","id","onMouseDown","onMouseUp","onTouchEnd","onTouchStart","elementId","requestFullscreen","exn","webkitRequestFullScreen","exn$1","i","s","dangerouslySetInnerHTML","__html","action","_self","clear","now","Date","ret_state","residual_delta_t","current_delta_t","App_handleTick","URL","process","origin","concat","fetch","response","status","headers","get","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"mOAKAA,EAAA,SAEA,SAAAC,EAAAC,GACA,OAAAA,EAAAC,IAaA,SAAAC,EAAAC,EAAAC,GAEA,OADAD,EAAAD,UAAAE,EACA,EAGA,SAAAC,EAAAF,EAAAG,GAEA,OADAH,EAAAG,OACA,EAGA,SAAAC,EAAAJ,EAAAK,GACA,OAAAL,EAAAM,YAAAD,GAAAE,MAGA,SAAAC,EAAAC,GACA,IAAAC,EAAAf,EAAAgB,cAAA,OAEA,OADAD,EAAAD,MACAC,EAGA,SAAAE,EAAAZ,EAAAU,EAAAG,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GAEA,OADAlB,EAAAmB,UAAAT,EAAAG,EAAAC,EAAAG,EAAAC,EAAAH,EAAAC,EAAAC,EAAAC,GACA,6BCtCA,SAAAE,EAAAX,EAAAY,EAAAd,EAAAe,EAAAC,EAAAC,GACA,IAAAC,OAAAC,IAAAH,IAAA,EACA,OACmBf,EAAyBC,GAC5CY,EACAd,EACAe,EACAG,GAIA,SAAAE,EAAAC,EAAA5B,EAAA6B,EAAAC,EAAAC,EAAAC,GACA,IAAAnB,EAAWoB,EAAA,EAAeJ,EAAA,GAAuBI,EAAA,EAAeD,EAAAH,EAAA,KAEhEb,EADAa,EAAA,SACAH,IAAAE,KAAAG,EAAA,GAAAF,EAAA,KAAAE,EACA,OAASnB,EAAkBZ,EAAA6B,EAAA,GAAAhB,EAAA,EAAAiB,EAAAd,EAAAa,EAAA,GAAAA,EAAA,ICf3B,SAASK,EAAIzB,EAAAY,EAAAd,EAAAgB,EAAAC,GACb,IAAAC,OAAAC,IAAAH,IAAA,EACA,OACmBf,EAAyBC,GAC5CY,EACAd,EACAkB,GAIA,SAASU,EAAMnC,EAAAoC,EAAAC,EAAAC,EAAAC,GACf,IACAvB,EADAoB,EAAA,GACAE,EAAAF,EAAA,OACAvB,EAAWoB,EAAA,EAAeM,EAAAH,EAAA,IAC1BvB,EAAA,IACAA,IAAAuB,EAAA,MAEA,IAAAI,EAAAC,KAAAC,IAAAN,EAAA,GAAAvB,EAAA,EAAAwB,GACEzB,EAAkBZ,EAAAoC,EAAA,GAAAvB,EAAA,IAAAG,EAAAwB,EAAAJ,EAAA,IAEpB,IADA,IAAArB,EAAAyB,EACAzB,EAAAsB,GAAA,CACA,IAAApB,EAAAwB,KAAAC,IAAAL,EAAAtB,EAAA,EAAAqB,EAAA,IACIxB,EAAkBZ,EAAAoC,EAAA,OAAArB,EAAAC,EAAAC,EAAAmB,EAAA,IACtBrB,IAAAqB,EAAA,KAEA,SCzBA,IAAAO,EAAST,EAA0B,sCAAAR,GAEnCkB,EAAeV,EAA0B,wCAEzCW,EAAoBX,EAA0B,+CAE9CY,EAAiBZ,EAA0B,4CAE3Ca,EAAeb,EAA0B,0CAEzCc,EAAe5B,EAAiB,2CAAAM,GAEhCuB,EAAmB7B,EAAiB,gDAAAM,GAEpCwB,EAAY9B,EAAiB,0CAAAM,GAE7ByB,EAAA,WCTAC,EAAA,EAAgB,GAEhB,IAAAC,EAAA,GAEA,SAAAC,EAAA9B,GACA,OAC4B+B,EAAA,EAAQ,QACpC,EACA,EACA,EACA,IACA,EACA,EACA,EACA,QACA7B,GAIA,SAAA8B,EAAAC,GACA,IAAAC,EAAAJ,IACA,OACAI,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAD,EAAA,IAIA,SAAAE,EAAAnC,GACA,IAAAoC,EAAkBC,EAAA,EAAcC,EAAA,EAAgCC,EAAA,EAAwBC,aAAAC,QAAA,eACxFP,EAAAJ,IACA,OACAI,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAE,GAYA,SAAAM,EAAAT,GACA,IAAAU,EAAAV,EAAA,GACA,qBAAAU,KAAAC,IAEG,CACH,IAAAC,EAAAZ,EAAA,GACAG,OAAAlC,IAAA2C,EAAA5B,KAAA6B,IAAAb,EAAA,GAAAY,GAAAZ,EAAA,GACA,OAfA,SAAAA,GACA,IAAAU,EAAAV,EAAA,GAIA,YAHA/B,IAAAyC,GACAH,aAAAO,QAAA,YAAAC,OAAAL,IAEAV,EAUAgB,CAAA,CACAhB,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAG,IAdA,OAAAH,EA+KA,SAAAiB,EAAAjB,EAAAkB,GACA,IAAAR,EAAAV,EAAA,GACA,wBAAAU,EACAD,EAxIA,SAAAT,GACA,GAAAA,EAAA,GAAAmB,OAAA,EAEA,IADA,IAAAC,EAAApB,EAAA,OACAqB,EAAA,EAAAC,EAAoC3B,EAAA,EAAY,GAAI0B,GAAAC,IAAqBD,EAAA,CACzE,IAAAE,EAAAH,EAAA,IAA2CzB,EAAA,EAAc,KACzDK,EAAA,GAAAwB,KAAAD,GACAH,EAAAG,EAGA,OAAAvB,EA+HAyB,CA/JA,SAAAzB,GACA,IAAA0B,EAAA1B,EAAA,GAQA,OAPA,IAAAA,EAAA,GAAAmB,QACQQ,EAAA,EAAyB3B,EAAA,MAAAA,EAAA,IAAyDP,EAAgB,UAC1GO,EAAA,GAAA4B,QACAF,IAAA,KAIA,CACA1B,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACA0B,EACA1B,EAAA,GACAA,EAAA,IA4IA6B,CA5HA,SAAA7B,GACA,IAAA8B,EAAA,KAUA,OATEC,EAAA,EAAY,SAAAC,GACd,OAAAA,GAAAhC,EAAA,GAAAJ,GAAAoC,EAAuEvC,EAAgB,IAAAO,EAAA,OAAiDiC,EAAA,EAAajC,EAAA,IAA2BP,EAAgB,IAChMqC,EAAA,MACA,GAEA,GAES9B,EAAA,IACT8B,EAAA,GAEA,CACkChC,EAAA,EAAQ,OAC1CE,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,IAGAA,EAmGAkC,CA/FA,SAAAlC,EAAAkB,GACA,IACAiB,EADAzB,EAAAV,EAAA,GAEA,qBAAAU,EACA,OAAAA,EACA,OAAAV,EAAA,GACAmC,EAAA,CACAnC,EAAA,GACA,EACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACA,EACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,QAEO,CACP,IAAAoC,EAAApC,EAAA,QACAqC,EAAAnB,EAAAkB,EACAE,EAAAtD,KAAA6B,IAAA,EAAAwB,EAAArC,EAAA,IACAmC,EAAA,CACAnC,EAAA,GACAA,EAAA,GACAsC,EACAtC,EAAA,GACAA,EAAA,GACAoC,EACApC,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,SAIAmC,EAAAnC,MAEG,CACH,IAAAuC,EAAA7B,EAAA,GACA,OAAA6B,GAAA,IAAAvC,EAAA,GACAmC,EAAA,CACAnC,EAAA,GACA,EACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACA,EACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,QAEK,CACL,IACAwC,GADAD,EAAA,EAEA,MACA,IACAE,EAAAzC,EAAA,GAAAwC,EACAE,EAAAxB,EAAAuB,EACAE,EAAA3D,KAAA6B,IAAA,EAAA6B,EAAA1C,EAAA,IACA4C,EAAA,CAAA5D,KAAA6B,IAAA,EAAA0B,EAAArB,IACAiB,EAAA,CACAnC,EAAA,GACA4C,EACAD,EACA3C,EAAA,GACAA,EAAA,GACAyC,EACAzC,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,KAIA,IAAAuB,EAAAY,EAAA,GAAAjB,EAAAiB,EAAA,GACAU,EAAAV,EAAA,GAAAjB,EACA,OACAiB,EAAA,GACAA,EAAA,GACAA,EAAA,GACAZ,EACAY,EAAA,GACAA,EAAA,GACAU,EACAV,EAAA,GACAA,EAAA,GACAA,EAAA,IAOAW,CAAA9C,EAAAkB,OACGR,EAAAC,IACH,CACkCb,EAAA,EAAQ,GAAAd,KAAA6B,IAAA,EAAAH,EAAA,GAAAQ,KAC1ClB,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,IAGA,CAC8BF,EAAA,EAAQ,GAAAd,KAAA6B,IAAA,EAAAH,EAAA,GAAAQ,KACtClB,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,IAKA,SAAA+C,EAAA/C,GACA,IAAAU,EAAAV,EAAA,GACAY,EAAAZ,EAAA,GACA,qBAAAU,EACA,wBAAAE,GAAA,IAAAA,GAAA,IAAAZ,EAAA,GACA,CACAA,EAAA,GACA,KACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACA,IACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,IAGAA,EAEG,GAAAU,EAAAC,IACH,WAAAD,EAAA,GACAV,EAEAD,EAAAC,GAEG,OAAAU,EAAA,GACH,OAAAV,EAEA,IAAAC,EAAAF,EAAAC,GACA,OACA,EACAC,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,IAKA,SAAA+C,EAAAhD,GACA,OACAA,EAAA,GACA,EACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,IAIA,YC1UA,SAAAiD,EAAAnE,EAAAoE,GAEA,GADAA,GAAA,EAEA,OAAApE,EAEA,IAAAqE,EAAoB3E,EAAA,EAAe0E,KACnC,OAAWjB,EAAA,EAAanD,EAAAqE,GAIxB,SAAAC,EAAA7G,EAAAqC,EAAAhC,EAAAyG,GACE5G,EAAgBF,EAAU+G,EAAA,EAASC,EAAA,EAAc,CAC1BzD,EAAA,EAAQ,GACjC,EACA,EACA,EACwCA,EAAA,EAAQ,IAChD,sBACA,MAGA,0BACA,KACA,IAAA0D,EAAmB7G,EAAyBJ,EAAAK,GAC5C6G,GAAA7E,EAAA4E,EAAA,OACElH,EAAkBC,EAAA,SACpBA,EAAAmH,SAAAD,EAAA,QAAAD,EAAA,SACA,IAAAG,EAAA,OAAA3E,KAAAC,IAAAoE,EAAA,MAiCA,OAhCE/G,EAAkBC,EAAU+G,EAAA,EAASC,EAAA,EAAc,CACjBzD,EAAA,EAAQ,IAC5C,OAC6BA,EAAA,EAAQ,GACrC,EACA,EACA,EAC4CA,EAAA,EAAQ,IACpD,KACqCA,EAAA,EAAQ,GAC7C,EACA,EACA,EACoDA,EAAA,EAAQ,IAC5D,KAC6CA,EAAA,EAAQ,GACrD,EACA,EACA,EAC0DA,EAAA,EAAQ,IAClE,GACA,gBAQA,oBACA6D,QACApH,EAAAqH,SAAAhH,EAAA6G,EAAA,KACA,EAqCA,SAAAI,EAAAtH,EAAAuH,GACA,IAAAlH,EAAa0G,EAAA,EAASC,EAAA,EAAc,CACJzD,EAAA,EAAQ,IACxC,WACyBA,EAAA,EAAQ,GACjC,EACA,EACA,EACA,MAGA,eACAgE,GACErH,EAAgBF,EAAU+G,EAAA,EAASC,EAAA,EAAc,CAC1BzD,EAAA,EAAQ,GACjC,EACA,EACA,EACwCA,EAAA,EAAQ,IAChD,sBACA,MAGA,0BACA,KACA,IAAA0D,EAAmB7G,EAAyBJ,EAAAK,GAK5C,OAJEN,EAAkBC,EAAA,SACpBA,EAAAmH,SAAA,KAAAF,EAAA,SACElH,EAAkBC,EAAA,QACpBA,EAAAqH,SAAAhH,EAAA,OACA,EAGA,SAASmH,EAAMjH,EAAAc,EAAArB,EAAAyH,EAAAjG,GACfxB,EAAA0H,UAAA,IAAAnH,EAAAc,GACA,IAAAsG,EAAA,EAAAF,EAAA,GACEtF,EAA4BnC,EAAU2C,EAAapC,EAAAc,EAAAqF,EAAAiB,EAAA,IACnDxF,EAA4BnC,EAAU6C,EAAwBtC,EAAAc,EAAAqF,EAAAiB,EAAA,IAC9DxF,EAA4BnC,EAAU+C,EAAmBxC,EAAAc,EAAAqF,EAAAiB,EAAA,IACzDxF,EAA4BnC,EAAU8C,EAAqBvC,EAAAc,EAAAqF,EAAAiB,EAAA,IAC3DxF,EAA4BnC,EAAU4C,EAAmBrC,EAAAc,EAAAqF,EAAAiB,EAAA,IAC3D,IACAC,EADA,IAAAH,EAAA,GAC8BzE,EAAsBC,EAEpD4E,EAAA,kBADAJ,EAAA,GACmD/B,EAAA,EAAa,GAAA+B,EAAA,MAChE1B,EAAiB5C,EAA6BuC,EAAA,EAAa+B,EAAA,MACzD9F,EAAmBN,EAAArB,EAAA4H,EAAA,GAAA7B,EAAA8B,GACnBrC,EAAA,EAAY,SAAAsC,GACd,IAAAC,EAA6BrC,EAAA,EAAaoC,EAAAL,EAAA,IAC1C,OAAAM,EAA8B7E,EAAgB,SAAA6E,EAAAxH,EAC3BoB,EAAmBN,EAAArB,EAAkBkD,EAAgB6E,EAAgB5E,EAA0B,GAElH,GAESsE,EAAA,IACT,IAAAO,EAAAP,EAAA,GACA,kBAAAO,EACAP,EAAA,MACAZ,EAAA7G,EAAAO,EAAA,SAAAkH,EAAA,IAGGO,EAAA5D,IACHyC,EAAA7G,EAAAO,EAAA,YAAAyH,EAAA,IAEAnB,EAAA7G,EAAAO,EAAA,SAAAyH,EAAA,IAEA,IAAAC,EAAAR,EAAA,GACA,kBAAAQ,EACAR,EAAA,MACAH,EAAAtH,EAAAyH,EAAA,IAGGQ,EAAA7D,KACHkD,EAAAtH,EAAAyH,EAAA,IAEA,IAAAS,EAAAT,EAAA,GACAU,EAAAV,EAAA,GAOA,MANA,kBAAAS,QACAxG,IAAAyG,GAhHA,SAAAnI,EAAAqC,EAAA8C,GACA,IAAA9E,EAAa0G,EAAA,EAASC,EAAA,EAAc,CACJzD,EAAA,EAAQ,IACxC,cACyBA,EAAA,EAAQ,GACjC,EACA,EACA,EACA,MAGA,kBACA4B,GACEjF,EAAgBF,EAAU+G,EAAA,EAASC,EAAA,EAAc,CAC1BzD,EAAA,EAAQ,GACjC,EACA,EACA,EACwCA,EAAA,EAAQ,IAChD,sBACA,MAGA,0BACA,KACA,IAAA0D,EAAmB7G,EAAyBJ,EAAAK,GAC5C6G,GAAA7E,EAAA4E,EAAA,OACElH,EAAkBC,EAAA,SACpBA,EAAAmH,SAAAD,EAAA,SAAAD,EAAA,SACElH,EAAkBC,EAAA,QACpBA,EAAAqH,SAAAhH,EAAA6G,EAAA,KAmFAkB,CAAApI,EAAAO,EAAA4H,GAIA,ECzJA,SAASE,EAAY7G,GACrB,QACA,GACA,OACAE,EACoBiC,KA9BpBP,EAAA,EAAgB,GAkChB,IAAAkF,EAAgBC,EAAA,EAA4B,OA8T5C,YCrWMC,EAAcC,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASzE,MACvB,2DAsCN,SAAS0E,EAAgBC,EAAOC,GAC9BC,UAAUC,cACPC,SAASJ,GACTK,KAAK,SAAAC,GACJA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACtCD,EAAiBE,cAAgB,WACA,cAA3BF,EAAiB7F,QACfuF,UAAUC,cAAcQ,YAK1BC,QAAQC,IAAI,6CAGRZ,EAAOa,UACTb,EAAOa,SAASR,KAMlBM,QAAQC,IAAI,sCAGRZ,EAAOc,WACTd,EAAOc,UAAUT,SAO5BU,MAAM,SAAAC,GACLL,QAAQK,MAAM,4CAA6CA,KClF/DC,EAAQ,IAEVC,EAAA,EAAiC1B,EAAA,OAAmB7G,SF2CpD,CACA4G,EAAA,GACAA,EAAA,GACAA,EAAA,GACAA,EAAA,GACA,SAAA4B,GACA,IAAAC,EAAAC,YAAA,SAAA5I,GACA,OAA6BuF,EAAA,EAAQmD,EAAA,OAChB,GACPnD,EAAA,EAAQmD,EAAA,YAAA1I,GAEtB,OADA6I,cAAAF,GACA,IAEA,IAAAG,EAAA,SAAAC,GACA,IAAmDA,ENtDnDC,OMwDA,OAD6B5K,EAAyB2K,IAEtD,QACA,QACwBxD,EAAA,EAAQmD,EAAA,MAMhC,UAEcvK,EAAmB8K,iBAAA,UAAAH,GAAA,GACnBvD,EAAA,EAAQmD,EAAA,YAAA1I,GAEtB,OADsB7B,EAAmB+K,oBAAA,UAAAJ,GAAA,GACzC,IAEA,IAAAK,EAAA,SAAAJ,GAEA,OAD2B3K,EAAyB2K,IAEpD,QACA,QACsBxD,EAAA,EAAQmD,EAAA,MAK9B,UAOA,OALcvK,EAAmB8K,iBAAA,QAAAE,GAAA,GACnB5D,EAAA,EAAQmD,EAAA,YAAA1I,GAEtB,OADsB7B,EAAmB+K,oBAAA,QAAAC,GAAA,GACzC,IAEA,GAEA,SAAAC,GACA,INzFAC,EMyFAX,EAAAU,EAAA,GACAzG,GN1FA0G,EM0FqD,SNzF5ChH,EAAA,EAAa,SAAAiH,GACtB,OAAAA,EAAAC,WAAA,OACkBhH,EAAA,EAA4BpE,EAAAqL,eAAAH,MMwF9CxG,EAAA6F,EAAA,MACA,QAAAxI,IAAAyC,QAAAzC,IAAA2C,EAAA,CACA,IAAAoD,EAAApD,EACArE,EAA8B+D,EAAA,EAA0BI,GAIxD,OAHA8G,sBAAA,SAAAC,GACA,OAA+B1D,EAAmB,QAAAxH,EAAAyH,KAElD,EAEA,UAGAa,EAAA,GACAA,EAAA,GACAA,EAAA,GACA,SAAA4B,GACA,IACAiB,EADAhH,EAAA+F,EAAA,MAEA,QAAAxI,IAAAyC,EAAA,CACA,IAAAE,EAAAF,EAAA,GACAgH,OAAAzJ,IAAA2C,EAA8C+G,EAAA,cAAmB,SAAA1J,EAAiBqF,EAAA,EAASC,EAAA,EAAc,CACrDzD,EAAA,EAAQ,IAC5D,cAC6CA,EAAA,EAAQ,GACrD,EACA,EACA,EACA,MAGA,kBACAc,IAAA,UAEA8G,EAAA,KAEA,IACAE,EADArD,EAAAkC,EAAA,MAsBA,OAlBAmB,OAFA3J,IAAAsG,QAEAtG,IADAsG,EAAA,GACgDoD,EAAA,cAAmB,UACnEE,UAAmCC,EAAA,EAAU,CACfA,EAAA,EAAc,QAC5C,IAEAC,QAAA,SAAAC,GACA,OAAmC1E,EAAA,EAAQmD,EAAA,QAElBlD,EAAA,EAAc,CACSzD,EAAA,EAAQ,IACxD,YACA,IAEA,eAGA,KAEqB6H,EAAA,cAAmB,OACxCE,UAAqCC,EAAA,EAAU,CACfA,EAAA,EAAc,QAC9C,CACkCA,EAAA,EAAiB,UACnD,CACoCA,EAAA,EAAoB,UACxD,OAI2BH,EAAA,cAAmB,UAC9CE,UAAyCC,EAAA,EAAU,CACDhI,EAAA,EAAQ,GAC1D,oBACA,CAC0CgI,EAAA,EAAc,QACxD,KAGA,CACoDhI,EAAA,EAAQ,GAC5D,6BACA,CAC4CgI,EAAA,EAAc,QAC1D,KAGA,KAGAG,GAAA,SACArK,OAAAmD,OAAA,KACAjE,MAAAiE,OAAA,KACAmH,YAAA,SAAAF,GACA,OAAyC1E,EAAA,EAAQmD,EAAA,OAEjD0B,UAAA,SAAAH,GACA,OAAyC1E,EAAA,EAAQmD,EAAA,OAEjD2B,WAAA,SAAAJ,GACA,OAAyC1E,EAAA,EAAQmD,EAAA,OAEjD4B,aAAA,SAAAL,GACA,OAAyC1E,EAAA,EAAQmD,EAAA,SAEjBkB,EAAA,cAAmB,OACnDE,UAAyCC,EAAA,EAAU,CACfA,EAAA,EAAc,QAClD,CACsCA,EAAA,EAAiB,UACvD,CACwCA,EAAA,EAAoB,UAC5D,OAI+BH,EAAA,cAAmB,OAClDE,UAA6CC,EAAA,EAAU,CACfA,EAAA,EAAc,QACtD,CAC0CA,EAAA,EAAiB,UAC3D,CAC4CA,EAAA,EAAoB,UAChE,CAC8CA,EAAA,EAAgB,WAC9D,CACgDA,EAAA,EAAe,SAC/D,CACgEhI,EAAA,EAAQ,GACxE,4BACA,CACwDgI,EAAA,EAAe,QACvE,KAGA,CACoDA,EAAA,EAAc,QAClE,WAQmCH,EAAA,cAAmB,SAAA1J,EAAA,UAAAyJ,EAAiCC,EAAA,cAAmB,UAC1GE,UAAiDC,EAAA,EAAU,CACfA,EAAA,EAAc,QAC1D,IAEAC,QAAA,SAAAC,GNhNA,IAAAM,EMkNA,ONlNAA,EMiN2E,SNhNlElI,EAAA,EAAiB,SAAAiH,GAC1B,IAAAf,GAAA,EACA,IACAe,EAAAkB,oBAEA,MAAAC,GACAlC,GAAA,EAEA,GAAAA,EAAA,CACAL,QAAAC,IAAA,kCACA,IACAmB,EAAAoB,0BAEA,MAAAC,OAKkBpI,EAAA,EAA4BpE,EAAAqL,eAAAe,KM+LGhF,EAAA,EAAQmD,EAAA,WAEpB,qBAAAmB,EAA+BD,EAAA,cAAmB,KACvFE,UAAiDC,EAAA,EAAU,CACfA,EAAA,EAAe,UAC3D,KAEqC,uKAA0KH,EAAA,cAAmB,OAClOE,UAAiDC,EAAA,EAAU,CACfA,EAAA,EAAe,UAC3D,CAC8CA,EAAA,EAAgB,UAC9D,MAGuC/F,EAAA,EAAY,SAAA4G,EAAAC,GACnD,OAAmDjB,EAAA,cAAmB,KACtEtL,IAAA0E,OAAA4H,GACAE,wBAAA,CACAC,OAAAF,MAG2C,CAC3C,wDACA,MACA,wHAG4BhE,EAC5BC,EAAA,IACA,SAAAkE,EAAA/I,GACA,IAAAU,EAAAV,EAAA,GACA,qBAAA+I,EAmEA,OAAmCjJ,EAAA,EAAQ,IAC3CE,EAAA,GACA+I,EAAA,GACA/I,EAAA,GACAA,EAAA,MAtEA,OAAA+I,GACA,OACA,OAAyCjJ,EAAA,EAAQ,KACjD,EACAE,EAAA,GACAA,EAAA,GAC4CH,OAE5C,OACA,OAAwDC,EAAA,EAAQ,GAChE,CACAE,EAAA,GACAA,EAAA,GACAA,EAAA,GAC4CH,KAE5C,SAAAmJ,GAEA,OADAzI,aAAA0I,QACA,KAGA,OACA,IAAAC,EAAAC,KAAAD,MAAA,IACAtI,EAAAZ,EAAA,GACA,QAAA/B,IAAA2C,EAAA,CACA,IACAX,EA1SA,SAAmBD,EAAAkB,GACnB,IAAAR,EAAAV,EAAA,GACA,QAAA/B,IAAAyC,EAAA,CAIA,IAHA,IAAAsD,EAAAtD,EACA0I,EAAApJ,EACAqJ,EAAAnI,EACAmI,EAAA,IACA,IAAAC,EAAAtK,KAAAC,IAAAoK,EAAA,IACApJ,EAAAmJ,EACAA,EAAA,CACAnJ,EAAA,GACAA,EAAA,GACAA,EAAA,GACkBgB,EAAoB+C,EAAAsF,IAEtCD,GAAA,GAEA,OAAAD,EAEA,OAAApJ,EAuRmCuJ,CAAUvJ,EAD7CkJ,EAAAtI,GAEA,OAA2Cd,EAAA,EAAQ,IACnDG,EAAA,GACAA,EAAA,GACAiJ,EACAjJ,EAAA,MAGA,OAA2CH,EAAA,EAAQ,IACnDE,EAAA,GACAA,EAAA,GACAkJ,EACAlJ,EAAA,MAGA,OACA,YAAA/B,IAAAyC,GAAAV,EAAA,GAC2CF,EAAA,EAAQ,IACnDE,EAAA,GACAA,EAAA,GACAA,EAAA,GAC8CgD,EAAqBtC,MAGnE,EAEA,OACA,YAAAzC,IAAAyC,GAAAV,EAAA,GAC2CF,EAAA,EAAQ,IACnDE,EAAA,GACAA,EAAA,GACAA,EAAA,GAC8C+C,EAAuBrC,MAGrE,IAaAmE,EAAA,MElWmF,QDW5E,SAAkBS,GACvB,GAA6C,kBAAmBC,UAAW,CAGzE,GADkB,IAAIiE,IAAIC,UAAwBxE,OAAOC,UAC3CwE,SAAWzE,OAAOC,SAASwE,OAIvC,OAGFzE,OAAO+B,iBAAiB,OAAQ,WAC9B,IAAM3B,EAAK,GAAAsE,OAAMF,UAAN,sBAEP1E,GA2DV,SAAiCM,EAAOC,GAEtCsE,MAAMvE,GACHK,KAAK,SAAAmE,GAGkB,MAApBA,EAASC,SACuD,IAAhED,EAASE,QAAQC,IAAI,gBAAgBC,QAAQ,cAG7C1E,UAAUC,cAAc0E,MAAMxE,KAAK,SAAAC,GACjCA,EAAawE,aAAazE,KAAK,WAC7BT,OAAOC,SAASkF,aAKpBhF,EAAgBC,EAAOC,KAG1Be,MAAM,WACLJ,QAAQC,IACN,mEA/EAmE,CAAwBhF,EAAOC,GAI/BC,UAAUC,cAAc0E,MAAMxE,KAAK,WACjCO,QAAQC,IACN,+GAMJd,EAAgBC,EAAOC,MCrC/BG","file":"static/js/main.35f2a70f.chunk.js","sourcesContent":["// Generated by BUCKLESCRIPT VERSION 4.0.7, PLEASE EDIT WITH CARE\n\nimport * as Js_option from \"bs-platform/lib/es6/js_option.js\";\nimport * as Js_primitive from \"bs-platform/lib/es6/js_primitive.js\";\n\nvar $$document = ( document );\n\nfunction keyboardEventKey(keyboardEvent) {\n  return keyboardEvent.key;\n}\n\nfunction keyboardEventIsRepeat(keyboardEvent) {\n  return keyboardEvent.repeat;\n}\n\nfunction getCanvas2DContext(canvasId) {\n  return Js_option.map((function (c) {\n                return c.getContext(\"2d\");\n              }), Js_primitive.nullable_to_opt($$document.getElementById(canvasId)));\n}\n\nfunction fillStyle(context, fillStyle$1) {\n  context.fillStyle = fillStyle$1;\n  return /* () */0;\n}\n\nfunction setFont(context, font) {\n  context.font = font;\n  return /* () */0;\n}\n\nfunction measureTextWidth(context, text) {\n  return context.measureText(text).width;\n}\n\nfunction createImgFromSrc(src) {\n  var img = $$document.createElement(\"img\");\n  img.src = src;\n  return img;\n}\n\nfunction blitImage(context, img, sx, sy, dx, dy, w, h) {\n  context.drawImage(img, sx, sy, w, h, dx, dy, w, h);\n  return /* () */0;\n}\n\nfunction requestFullscreenElement(elementId) {\n  return Js_option.andThen((function (c) {\n                var error = false;\n                try {\n                  c.requestFullscreen();\n                }\n                catch (exn){\n                  error = true;\n                }\n                if (error) {\n                  console.log(\"trying webkitRequestFullScreen\");\n                  try {\n                    c.webkitRequestFullScreen();\n                  }\n                  catch (exn$1){\n                    \n                  }\n                }\n                return undefined;\n              }), Js_primitive.nullable_to_opt($$document.getElementById(elementId)));\n}\n\nexport {\n  $$document ,\n  keyboardEventKey ,\n  keyboardEventIsRepeat ,\n  getCanvas2DContext ,\n  fillStyle ,\n  setFont ,\n  measureTextWidth ,\n  createImgFromSrc ,\n  blitImage ,\n  requestFullscreenElement ,\n  \n}\n/* document Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 4.0.7, PLEASE EDIT WITH CARE\n\nimport * as Dom_html from \"./Dom_html\";\nimport * as Caml_int32 from \"bs-platform/lib/es6/caml_int32.js\";\n\nfunction make(src, height, width, frames, $staropt$star, param) {\n  var align = $staropt$star !== undefined ? $staropt$star : /* Bottom */1;\n  return /* record */[\n          /* img */Dom_html.createImgFromSrc(src),\n          /* height */height,\n          /* width */width,\n          /* frames */frames,\n          /* align */align\n        ];\n}\n\nfunction render(viewport_h, context, sprite, x, y, frame) {\n  var sx = Caml_int32.imul(sprite[/* width */2], Caml_int32.mod_(frame, sprite[/* frames */3]));\n  var match = sprite[/* align */4];\n  var dy = match && viewport_h !== undefined ? (viewport_h - y | 0) - sprite[/* height */1] | 0 : y;\n  return Dom_html.blitImage(context, sprite[/* img */0], sx, 0, x, dy, sprite[/* width */2], sprite[/* height */1]);\n}\n\nexport {\n  make ,\n  render ,\n  \n}\n/* Dom_html Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 4.0.7, PLEASE EDIT WITH CARE\n\nimport * as Dom_html from \"./Dom_html\";\nimport * as Caml_int32 from \"bs-platform/lib/es6/caml_int32.js\";\n\nfunction make(src, height, width, $staropt$star, param) {\n  var align = $staropt$star !== undefined ? $staropt$star : /* Top */0;\n  return /* record */[\n          /* img */Dom_html.createImgFromSrc(src),\n          /* height */height,\n          /* width */width,\n          /* align */align\n        ];\n}\n\nfunction render(context, bgimage, viewport_width, viewport_height, offset) {\n  var match = bgimage[/* align */3];\n  var dy = match ? viewport_height - bgimage[/* height */1] | 0 : 0;\n  var sx = Caml_int32.mod_(offset, bgimage[/* width */2]);\n  if (sx < 0) {\n    sx = sx + bgimage[/* width */2] | 0;\n  }\n  var sw = Math.min(bgimage[/* width */2] - sx | 0, viewport_width);\n  Dom_html.blitImage(context, bgimage[/* img */0], sx, 0, 0, dy, sw, bgimage[/* height */1]);\n  var dx = sw;\n  while(dx < viewport_width) {\n    var w = Math.min(viewport_width - dx | 0, bgimage[/* width */2]);\n    Dom_html.blitImage(context, bgimage[/* img */0], 0, 0, dx, dy, w, bgimage[/* height */1]);\n    dx = dx + bgimage[/* width */2] | 0;\n  };\n  return /* () */0;\n}\n\nexport {\n  make ,\n  render ,\n  \n}\n/* Dom_html Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 4.0.7, PLEASE EDIT WITH CARE\n\nimport * as CanvasSprite from \"./CanvasSprite\";\nimport * as CanvasBackgroundImage from \"./CanvasBackgroundImage\";\n\nvar bg = CanvasBackgroundImage.make(\"media/citymega-bg.png\", 316, 1600, undefined, /* () */0);\n\nvar pavement = CanvasBackgroundImage.make(\"media/citymega-pavement.png\", 15, 192, /* Bottom */1, /* () */0);\n\nvar distantstreet = CanvasBackgroundImage.make(\"media/citymega-distantstreet.png\", 268, 1600, /* Bottom */1, /* () */0);\n\nvar powerlines = CanvasBackgroundImage.make(\"media/citymega-powerlines.png\", 111, 1600, /* Bottom */1, /* () */0);\n\nvar fgstreet = CanvasBackgroundImage.make(\"media/citymega-fgstreet.png\", 242, 1600, /* Bottom */1, /* () */0);\n\nvar greenbob = CanvasSprite.make(\"media/citymega-greenbob.png\", 32, 32, 6, undefined, /* () */0);\n\nvar greenbobjump = CanvasSprite.make(\"media/citymega-greenbob-jump.png\", 32, 32, 2, undefined, /* () */0);\n\nvar crate = CanvasSprite.make(\"media/citymega-crate24.png\", 24, 24, 1, undefined, /* () */0);\n\nvar pavement_height = 15;\n\nexport {\n  bg ,\n  pavement ,\n  distantstreet ,\n  powerlines ,\n  fgstreet ,\n  pavement_height ,\n  greenbob ,\n  greenbobjump ,\n  crate ,\n  \n}\n/* bg Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 4.0.7, PLEASE EDIT WITH CARE\n\nimport * as $$Array from \"bs-platform/lib/es6/array.js\";\nimport * as Block from \"bs-platform/lib/es6/block.js\";\nimport * as Random from \"bs-platform/lib/es6/random.js\";\nimport * as Js_math from \"bs-platform/lib/es6/js_math.js\";\nimport * as Js_option from \"bs-platform/lib/es6/js_option.js\";\nimport * as Caml_array from \"bs-platform/lib/es6/caml_array.js\";\nimport * as CanvasData from \"./CanvasData\";\nimport * as Caml_format from \"bs-platform/lib/es6/caml_format.js\";\nimport * as Js_primitive from \"bs-platform/lib/es6/js_primitive.js\";\n\nRandom.self_init(/* () */0);\n\nvar player_collision_x2 = 20 + 12;\n\nfunction initialState(param) {\n  return /* record */[\n          /* state : Idle */Block.__(0, [0.5]),\n          /* player_jumping : Ready */0,\n          /* player_y */0,\n          /* distance */0,\n          /* scroll_velocity */200,\n          /* player_velocity */0,\n          /* time */0,\n          /* score */0,\n          /* obstacles : array */[],\n          /* highscore */undefined\n        ];\n}\n\nfunction resetState(state) {\n  var init = initialState(/* () */0);\n  return /* record */[\n          /* state */init[/* state */0],\n          /* player_jumping */init[/* player_jumping */1],\n          /* player_y */init[/* player_y */2],\n          /* distance */init[/* distance */3],\n          /* scroll_velocity */init[/* scroll_velocity */4],\n          /* player_velocity */init[/* player_velocity */5],\n          /* time */init[/* time */6],\n          /* score */init[/* score */7],\n          /* obstacles */init[/* obstacles */8],\n          /* highscore */state[/* highscore */9]\n        ];\n}\n\nfunction localStorageState(param) {\n  var highscore = Js_option.map(Caml_format.caml_int_of_string, Js_primitive.null_to_opt(localStorage.getItem(\"highscore\")));\n  var init = initialState(/* () */0);\n  return /* record */[\n          /* state */init[/* state */0],\n          /* player_jumping */init[/* player_jumping */1],\n          /* player_y */init[/* player_y */2],\n          /* distance */init[/* distance */3],\n          /* scroll_velocity */init[/* scroll_velocity */4],\n          /* player_velocity */init[/* player_velocity */5],\n          /* time */init[/* time */6],\n          /* score */init[/* score */7],\n          /* obstacles */init[/* obstacles */8],\n          /* highscore */highscore\n        ];\n}\n\nfunction localStorageSaveState(state) {\n  var match = state[/* highscore */9];\n  if (match !== undefined) {\n    localStorage.setItem(\"highscore\", String(match));\n  }\n  return state;\n}\n\nfunction checkGameOver(state) {\n  var match = state[/* state */0];\n  if (typeof match === \"number\" || !match.tag) {\n    return state;\n  } else {\n    var match$1 = state[/* highscore */9];\n    var highscore = match$1 !== undefined ? Math.max(state[/* score */7], match$1) : state[/* score */7];\n    return localStorageSaveState(/* record */[\n                /* state */state[/* state */0],\n                /* player_jumping */state[/* player_jumping */1],\n                /* player_y */state[/* player_y */2],\n                /* distance */state[/* distance */3],\n                /* scroll_velocity */state[/* scroll_velocity */4],\n                /* player_velocity */state[/* player_velocity */5],\n                /* time */state[/* time */6],\n                /* score */state[/* score */7],\n                /* obstacles */state[/* obstacles */8],\n                /* highscore */highscore\n              ]);\n  }\n}\n\nfunction updateObstacles(state) {\n  var score = state[/* score */7];\n  if (state[/* obstacles */8].length !== 0) {\n    if (Caml_array.caml_array_get(state[/* obstacles */8], 0) < state[/* distance */3] - (CanvasData.crate[/* width */2] + 1 | 0)) {\n      state[/* obstacles */8].shift();\n      score = score + 1 | 0;\n    }\n    \n  }\n  return /* record */[\n          /* state */state[/* state */0],\n          /* player_jumping */state[/* player_jumping */1],\n          /* player_y */state[/* player_y */2],\n          /* distance */state[/* distance */3],\n          /* scroll_velocity */state[/* scroll_velocity */4],\n          /* player_velocity */state[/* player_velocity */5],\n          /* time */state[/* time */6],\n          /* score */score,\n          /* obstacles */state[/* obstacles */8],\n          /* highscore */state[/* highscore */9]\n        ];\n}\n\nfunction generateObstacles(state) {\n  if (state[/* obstacles */8].length < 1) {\n    var last_distance = state[/* distance */3] + 700;\n    for(var _for = 0 ,_for_finish = Random.$$int(9); _for <= _for_finish; ++_for){\n      var distance = last_distance + 120 + Random.$$float(150);\n      state[/* obstacles */8].push(distance);\n      last_distance = distance;\n    }\n  }\n  return state;\n}\n\nfunction checkCollision(state) {\n  var collision = /* record */[/* contents */false];\n  $$Array.iter((function (o) {\n          if (o <= state[/* distance */3] + player_collision_x2 && o + CanvasData.crate[/* width */2] >= state[/* distance */3] + 20 && Js_math.floor(state[/* player_y */2]) < CanvasData.crate[/* height */1]) {\n            collision[0] = true;\n            return /* () */0;\n          } else {\n            return 0;\n          }\n        }), state[/* obstacles */8]);\n  var match = collision[0];\n  if (match) {\n    return /* record */[\n            /* state : GameOver */Block.__(1, [1]),\n            /* player_jumping */state[/* player_jumping */1],\n            /* player_y */state[/* player_y */2],\n            /* distance */state[/* distance */3],\n            /* scroll_velocity */state[/* scroll_velocity */4],\n            /* player_velocity */state[/* player_velocity */5],\n            /* time */state[/* time */6],\n            /* score */state[/* score */7],\n            /* obstacles */state[/* obstacles */8],\n            /* highscore */state[/* highscore */9]\n          ];\n  } else {\n    return state;\n  }\n}\n\nfunction updatePlayer(state, delta_t) {\n  var match = state[/* player_jumping */1];\n  var state$1;\n  if (typeof match === \"number\") {\n    if (match !== 0) {\n      if (state[/* player_y */2] === 0.0) {\n        state$1 = /* record */[\n          /* state */state[/* state */0],\n          /* player_jumping : Ready */0,\n          /* player_y */state[/* player_y */2],\n          /* distance */state[/* distance */3],\n          /* scroll_velocity */state[/* scroll_velocity */4],\n          /* player_velocity */0,\n          /* time */state[/* time */6],\n          /* score */state[/* score */7],\n          /* obstacles */state[/* obstacles */8],\n          /* highscore */state[/* highscore */9]\n        ];\n      } else {\n        var player_velocity = state[/* player_velocity */5] + -9.8;\n        var y_delta = delta_t * player_velocity;\n        var player_y = Math.max(0, y_delta + state[/* player_y */2]);\n        state$1 = /* record */[\n          /* state */state[/* state */0],\n          /* player_jumping */state[/* player_jumping */1],\n          /* player_y */player_y,\n          /* distance */state[/* distance */3],\n          /* scroll_velocity */state[/* scroll_velocity */4],\n          /* player_velocity */player_velocity,\n          /* time */state[/* time */6],\n          /* score */state[/* score */7],\n          /* obstacles */state[/* obstacles */8],\n          /* highscore */state[/* highscore */9]\n        ];\n      }\n    } else {\n      state$1 = state;\n    }\n  } else {\n    var t = match[0];\n    if (t === 0.0 && state[/* player_y */2] === 0.0) {\n      state$1 = /* record */[\n        /* state */state[/* state */0],\n        /* player_jumping : Ready */0,\n        /* player_y */state[/* player_y */2],\n        /* distance */state[/* distance */3],\n        /* scroll_velocity */state[/* scroll_velocity */4],\n        /* player_velocity */0,\n        /* time */state[/* time */6],\n        /* score */state[/* score */7],\n        /* obstacles */state[/* obstacles */8],\n        /* highscore */state[/* highscore */9]\n      ];\n    } else {\n      var match$1 = t > 0;\n      var impulse = (\n        match$1 ? 10 : 0\n      ) + -9.8;\n      var player_velocity$1 = state[/* player_velocity */5] + impulse;\n      var y_delta$1 = delta_t * player_velocity$1;\n      var player_y$1 = Math.max(0, y_delta$1 + state[/* player_y */2]);\n      var player_jumping = /* On */[Math.max(0, t - delta_t)];\n      state$1 = /* record */[\n        /* state */state[/* state */0],\n        /* player_jumping */player_jumping,\n        /* player_y */player_y$1,\n        /* distance */state[/* distance */3],\n        /* scroll_velocity */state[/* scroll_velocity */4],\n        /* player_velocity */player_velocity$1,\n        /* time */state[/* time */6],\n        /* score */state[/* score */7],\n        /* obstacles */state[/* obstacles */8],\n        /* highscore */state[/* highscore */9]\n      ];\n    }\n  }\n  var distance = state$1[/* distance */3] + delta_t * state$1[/* scroll_velocity */4];\n  var time = state$1[/* time */6] + delta_t;\n  return /* record */[\n          /* state */state$1[/* state */0],\n          /* player_jumping */state$1[/* player_jumping */1],\n          /* player_y */state$1[/* player_y */2],\n          /* distance */distance,\n          /* scroll_velocity */state$1[/* scroll_velocity */4],\n          /* player_velocity */state$1[/* player_velocity */5],\n          /* time */time,\n          /* score */state$1[/* score */7],\n          /* obstacles */state$1[/* obstacles */8],\n          /* highscore */state$1[/* highscore */9]\n        ];\n}\n\nfunction handleTick(state, delta_t) {\n  var match = state[/* state */0];\n  if (typeof match === \"number\") {\n    return checkGameOver(generateObstacles(updateObstacles(checkCollision(updatePlayer(state, delta_t)))));\n  } else if (match.tag) {\n    return /* record */[\n            /* state : GameOver */Block.__(1, [Math.max(0.0, match[0] - delta_t)]),\n            /* player_jumping */state[/* player_jumping */1],\n            /* player_y */state[/* player_y */2],\n            /* distance */state[/* distance */3],\n            /* scroll_velocity */state[/* scroll_velocity */4],\n            /* player_velocity */state[/* player_velocity */5],\n            /* time */state[/* time */6],\n            /* score */state[/* score */7],\n            /* obstacles */state[/* obstacles */8],\n            /* highscore */state[/* highscore */9]\n          ];\n  } else {\n    return /* record */[\n            /* state : Idle */Block.__(0, [Math.max(0.0, match[0] - delta_t)]),\n            /* player_jumping */state[/* player_jumping */1],\n            /* player_y */state[/* player_y */2],\n            /* distance */state[/* distance */3],\n            /* scroll_velocity */state[/* scroll_velocity */4],\n            /* player_velocity */state[/* player_velocity */5],\n            /* time */state[/* time */6],\n            /* score */state[/* score */7],\n            /* obstacles */state[/* obstacles */8],\n            /* highscore */state[/* highscore */9]\n          ];\n  }\n}\n\nfunction handleKeyDown(state) {\n  var match = state[/* state */0];\n  var match$1 = state[/* player_jumping */1];\n  if (typeof match === \"number\") {\n    if (typeof match$1 === \"number\" && !(match$1 !== 0 || state[/* player_y */2] !== 0)) {\n      return /* record */[\n              /* state */state[/* state */0],\n              /* player_jumping : On */[0.4],\n              /* player_y */state[/* player_y */2],\n              /* distance */state[/* distance */3],\n              /* scroll_velocity */state[/* scroll_velocity */4],\n              /* player_velocity */125,\n              /* time */state[/* time */6],\n              /* score */state[/* score */7],\n              /* obstacles */state[/* obstacles */8],\n              /* highscore */state[/* highscore */9]\n            ];\n    } else {\n      return state;\n    }\n  } else if (match.tag) {\n    if (match[0] !== 0) {\n      return state;\n    } else {\n      return resetState(state);\n    }\n  } else if (match[0] !== 0) {\n    return state;\n  } else {\n    var init = resetState(state);\n    return /* record */[\n            /* state : Run */0,\n            /* player_jumping */init[/* player_jumping */1],\n            /* player_y */init[/* player_y */2],\n            /* distance */init[/* distance */3],\n            /* scroll_velocity */init[/* scroll_velocity */4],\n            /* player_velocity */init[/* player_velocity */5],\n            /* time */init[/* time */6],\n            /* score */init[/* score */7],\n            /* obstacles */init[/* obstacles */8],\n            /* highscore */init[/* highscore */9]\n          ];\n  }\n}\n\nfunction handleKeyUp(state) {\n  return /* record */[\n          /* state */state[/* state */0],\n          /* player_jumping : Exhausted */1,\n          /* player_y */state[/* player_y */2],\n          /* distance */state[/* distance */3],\n          /* scroll_velocity */state[/* scroll_velocity */4],\n          /* player_velocity */state[/* player_velocity */5],\n          /* time */state[/* time */6],\n          /* score */state[/* score */7],\n          /* obstacles */state[/* obstacles */8],\n          /* highscore */state[/* highscore */9]\n        ];\n}\n\nvar player_jump_t = 0.4;\n\nvar player_jump_impulse = 10;\n\nvar player_gravity_impulse = -9.8;\n\nvar player_jump_t0_velocity = 125;\n\nvar player_collision_x1 = 20;\n\nvar gameover_timeout = 1;\n\nvar idle_timeout = 0.5;\n\nvar obstacle_horizon = 700;\n\nexport {\n  player_jump_t ,\n  player_jump_impulse ,\n  player_gravity_impulse ,\n  player_jump_t0_velocity ,\n  player_collision_x1 ,\n  player_collision_x2 ,\n  gameover_timeout ,\n  idle_timeout ,\n  obstacle_horizon ,\n  initialState ,\n  resetState ,\n  localStorageState ,\n  localStorageSaveState ,\n  checkGameOver ,\n  updateObstacles ,\n  generateObstacles ,\n  checkCollision ,\n  updatePlayer ,\n  handleTick ,\n  handleKeyDown ,\n  handleKeyUp ,\n  \n}\n/*  Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 4.0.7, PLEASE EDIT WITH CARE\n\nimport * as $$Array from \"bs-platform/lib/es6/array.js\";\nimport * as Block from \"bs-platform/lib/es6/block.js\";\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as Printf from \"bs-platform/lib/es6/printf.js\";\nimport * as Js_math from \"bs-platform/lib/es6/js_math.js\";\nimport * as Dom_html from \"./Dom_html\";\nimport * as Caml_int32 from \"bs-platform/lib/es6/caml_int32.js\";\nimport * as CanvasData from \"./CanvasData\";\nimport * as CanvasSprite from \"./CanvasSprite\";\nimport * as CanvasBackgroundImage from \"./CanvasBackgroundImage\";\n\nfunction parallax(offset, plane_index) {\n  var match = plane_index <= 0;\n  if (match) {\n    return offset;\n  } else {\n    var lagfactor = Caml_int32.imul(plane_index, plane_index);\n    return Js_math.floor(offset / lagfactor);\n  }\n}\n\nfunction render_banner(context, viewport_width, text, modifier) {\n  Dom_html.setFont(context, Curry._1(Printf.sprintf(/* Format */[\n                /* Int */Block.__(4, [\n                    /* Int_d */0,\n                    /* No_padding */0,\n                    /* No_precision */0,\n                    /* String_literal */Block.__(11, [\n                        \"px 'Press Start 2P'\",\n                        /* End_of_format */0\n                      ])\n                  ]),\n                \"%dpx 'Press Start 2P'\"\n              ]), 48));\n  var text_width = Dom_html.measureTextWidth(context, text);\n  var text_xpos = (viewport_width - text_width | 0) / 2 | 0;\n  Dom_html.fillStyle(context, \"#0007\");\n  context.fillRect(text_xpos - 20 | 0, 32, text_width + 40 | 0, 88);\n  var color_intensity = (1.0 - Math.min(modifier, 1.0)) * 255 | 0;\n  Dom_html.fillStyle(context, Curry._3(Printf.sprintf(/* Format */[\n                /* String_literal */Block.__(11, [\n                    \"rgb(\",\n                    /* Int */Block.__(4, [\n                        /* Int_d */0,\n                        /* No_padding */0,\n                        /* No_precision */0,\n                        /* String_literal */Block.__(11, [\n                            \", \",\n                            /* Int */Block.__(4, [\n                                /* Int_d */0,\n                                /* No_padding */0,\n                                /* No_precision */0,\n                                /* String_literal */Block.__(11, [\n                                    \", \",\n                                    /* Int */Block.__(4, [\n                                        /* Int_d */0,\n                                        /* No_padding */0,\n                                        /* No_precision */0,\n                                        /* Char_literal */Block.__(12, [\n                                            /* \")\" */41,\n                                            /* End_of_format */0\n                                          ])\n                                      ])\n                                  ])\n                              ])\n                          ])\n                      ])\n                  ]),\n                \"rgb(%d, %d, %d)\"\n              ]), color_intensity, color_intensity, color_intensity));\n  context.fillText(text, text_xpos, 100);\n  return /* () */0;\n}\n\nfunction render_highscore(context, viewport_width, score) {\n  var text = Curry._1(Printf.sprintf(/* Format */[\n            /* String_literal */Block.__(11, [\n                \"Highscore: \",\n                /* Int */Block.__(4, [\n                    /* Int_d */0,\n                    /* No_padding */0,\n                    /* No_precision */0,\n                    /* End_of_format */0\n                  ])\n              ]),\n            \"Highscore: %d\"\n          ]), score);\n  Dom_html.setFont(context, Curry._1(Printf.sprintf(/* Format */[\n                /* Int */Block.__(4, [\n                    /* Int_d */0,\n                    /* No_padding */0,\n                    /* No_precision */0,\n                    /* String_literal */Block.__(11, [\n                        \"px 'Press Start 2P'\",\n                        /* End_of_format */0\n                      ])\n                  ]),\n                \"%dpx 'Press Start 2P'\"\n              ]), 32));\n  var text_width = Dom_html.measureTextWidth(context, text);\n  var text_xpos = (viewport_width - text_width | 0) / 2 | 0;\n  Dom_html.fillStyle(context, \"#0007\");\n  context.fillRect(text_xpos - 20 | 0, 148, text_width + 40 | 0, 72);\n  Dom_html.fillStyle(context, \"#fff\");\n  context.fillText(text, text_xpos, 200);\n  return /* () */0;\n}\n\nfunction render_score(context, points) {\n  var text = Curry._1(Printf.sprintf(/* Format */[\n            /* String_literal */Block.__(11, [\n                \"Points: \",\n                /* Int */Block.__(4, [\n                    /* Int_d */0,\n                    /* No_padding */0,\n                    /* No_precision */0,\n                    /* End_of_format */0\n                  ])\n              ]),\n            \"Points: %d\"\n          ]), points);\n  Dom_html.setFont(context, Curry._1(Printf.sprintf(/* Format */[\n                /* Int */Block.__(4, [\n                    /* Int_d */0,\n                    /* No_padding */0,\n                    /* No_precision */0,\n                    /* String_literal */Block.__(11, [\n                        \"px 'Press Start 2P'\",\n                        /* End_of_format */0\n                      ])\n                  ]),\n                \"%dpx 'Press Start 2P'\"\n              ]), 16));\n  var text_width = Dom_html.measureTextWidth(context, text);\n  Dom_html.fillStyle(context, \"#0003\");\n  context.fillRect(0, -6, text_width + 20 | 0, 36);\n  Dom_html.fillStyle(context, \"#fff\");\n  context.fillText(text, 10, 20);\n  return /* () */0;\n}\n\nfunction render(width, height, context, data, param) {\n  context.clearRect(0, 0, width, height);\n  var bgscroll = data[/* distance */3] | 0;\n  CanvasBackgroundImage.render(context, CanvasData.bg, width, height, parallax(bgscroll, 6));\n  CanvasBackgroundImage.render(context, CanvasData.distantstreet, width, height, parallax(bgscroll, 5));\n  CanvasBackgroundImage.render(context, CanvasData.fgstreet, width, height, parallax(bgscroll, 2));\n  CanvasBackgroundImage.render(context, CanvasData.powerlines, width, height, parallax(bgscroll, 1));\n  CanvasBackgroundImage.render(context, CanvasData.pavement, width, height, parallax(bgscroll, 0));\n  var match = data[/* player_y */2] === 0;\n  var player_sprite = match ? CanvasData.greenbob : CanvasData.greenbobjump;\n  var match$1 = data[/* state */0];\n  var player_frame = typeof match$1 === \"number\" ? Js_math.floor(data[/* time */6] * 10) : 5;\n  var player_y = CanvasData.pavement_height + Js_math.floor(data[/* player_y */2]) | 0;\n  CanvasSprite.render(height, context, player_sprite, 10, player_y, player_frame);\n  $$Array.iter((function (pos) {\n          var relative_pos = Js_math.floor(pos - data[/* distance */3]);\n          if ((relative_pos + CanvasData.crate[/* width */2] | 0) > 0 && relative_pos < width) {\n            return CanvasSprite.render(height, context, CanvasData.crate, relative_pos, CanvasData.pavement_height, 0);\n          } else {\n            return 0;\n          }\n        }), data[/* obstacles */8]);\n  var match$2 = data[/* state */0];\n  if (typeof match$2 === \"number\") {\n    if (data[/* time */6] < 2.0) {\n      render_banner(context, width, \"Run!\", 2.0 - data[/* time */6]);\n    }\n    \n  } else if (match$2.tag) {\n    render_banner(context, width, \"Game Over\", match$2[0]);\n  } else {\n    render_banner(context, width, \"Ready?\", match$2[0]);\n  }\n  var match$3 = data[/* state */0];\n  if (typeof match$3 === \"number\") {\n    if (data[/* time */6] > 3.0) {\n      render_score(context, data[/* score */7]);\n    }\n    \n  } else if (match$3.tag) {\n    render_score(context, data[/* score */7]);\n  }\n  var match$4 = data[/* state */0];\n  var match$5 = data[/* highscore */9];\n  if (typeof match$4 !== \"number\") {\n    if (match$5 !== undefined) {\n      render_highscore(context, width, match$5);\n    }\n    \n  }\n  return /* () */0;\n}\n\nexport {\n  parallax ,\n  render_banner ,\n  render_highscore ,\n  render_score ,\n  render ,\n  \n}\n/* Dom_html Not a pure module */\n","// Generated by BUCKLESCRIPT VERSION 4.0.7, PLEASE EDIT WITH CARE\n\nimport * as $$Array from \"bs-platform/lib/es6/array.js\";\nimport * as Block from \"bs-platform/lib/es6/block.js\";\nimport * as Curry from \"bs-platform/lib/es6/curry.js\";\nimport * as React from \"react\";\nimport * as Glamor from \"bs-glamor/src/glamor.js\";\nimport * as Printf from \"bs-platform/lib/es6/printf.js\";\nimport * as Random from \"bs-platform/lib/es6/random.js\";\nimport * as Dom_html from \"./Dom_html\";\nimport * as GameState from \"./GameState\";\nimport * as ReasonReact from \"reason-react/src/ReasonReact.js\";\nimport * as CanvasRender from \"./CanvasRender\";\nimport * as Js_primitive from \"bs-platform/lib/es6/js_primitive.js\";\n\nRandom.self_init(/* () */0);\n\nfunction handleTick(state, delta_t) {\n  var match = state[/* data */3];\n  if (match !== undefined) {\n    var data = match;\n    var ret_state = state;\n    var residual_delta_t = delta_t;\n    while(residual_delta_t > 0) {\n      var current_delta_t = Math.min(residual_delta_t, 0.1);\n      var init = ret_state;\n      ret_state = /* record */[\n        /* start */init[/* start */0],\n        /* fullscreen */init[/* fullscreen */1],\n        /* last_tick */init[/* last_tick */2],\n        /* data */GameState.handleTick(data, current_delta_t)\n      ];\n      residual_delta_t -= 0.1;\n    };\n    return ret_state;\n  } else {\n    return state;\n  }\n}\n\nfunction initialState(param) {\n  return /* record */[\n          /* start */false,\n          /* fullscreen */false,\n          /* last_tick */undefined,\n          /* data */GameState.localStorageState(/* () */0)\n        ];\n}\n\nvar component = ReasonReact.reducerComponent(\"App\");\n\nfunction make(_children) {\n  return /* record */[\n          /* debugName */component[/* debugName */0],\n          /* reactClassInternal */component[/* reactClassInternal */1],\n          /* handedOffState */component[/* handedOffState */2],\n          /* willReceiveProps */component[/* willReceiveProps */3],\n          /* didMount */(function (self) {\n              var intervalId = setInterval((function (param) {\n                      return Curry._1(self[/* send */3], /* Tick */2);\n                    }), 0);\n              Curry._1(self[/* onUnmount */4], (function (param) {\n                      clearInterval(intervalId);\n                      return /* () */0;\n                    }));\n              var keydown = function (e) {\n                if (!Dom_html.keyboardEventIsRepeat(e)) {\n                  var code = Dom_html.keyboardEventKey(e);\n                  switch (code) {\n                    case \" \" : \n                    case \"w\" : \n                        Curry._1(self[/* send */3], /* KeyDown */4);\n                        break;\n                    default:\n                      \n                  }\n                }\n                return true;\n              };\n              Dom_html.$$document.addEventListener(\"keydown\", keydown, false);\n              Curry._1(self[/* onUnmount */4], (function (param) {\n                      Dom_html.$$document.removeEventListener(\"keydown\", keydown, false);\n                      return /* () */0;\n                    }));\n              var keyup = function (e) {\n                var code = Dom_html.keyboardEventKey(e);\n                switch (code) {\n                  case \" \" : \n                  case \"w\" : \n                      Curry._1(self[/* send */3], /* KeyUp */3);\n                      break;\n                  default:\n                    \n                }\n                return true;\n              };\n              Dom_html.$$document.addEventListener(\"keyup\", keyup, false);\n              Curry._1(self[/* onUnmount */4], (function (param) {\n                      Dom_html.$$document.removeEventListener(\"keyup\", keyup, false);\n                      return /* () */0;\n                    }));\n              return /* () */0;\n            }),\n          /* didUpdate */(function (oldAndNewSelf) {\n              var self = oldAndNewSelf[/* newSelf */1];\n              var match = Dom_html.getCanvas2DContext(\"canvas\");\n              var match$1 = self[/* state */1][/* data */3];\n              if (match !== undefined && match$1 !== undefined) {\n                var data = match$1;\n                var context = Js_primitive.valFromOption(match);\n                requestAnimationFrame((function (_f) {\n                        return CanvasRender.render(640, 320, context, data, /* () */0);\n                      }));\n                return /* () */0;\n              } else {\n                return /* () */0;\n              }\n            }),\n          /* willUnmount */component[/* willUnmount */6],\n          /* willUpdate */component[/* willUpdate */7],\n          /* shouldUpdate */component[/* shouldUpdate */8],\n          /* render */(function (self) {\n              var match = self[/* state */1][/* data */3];\n              var tmp;\n              if (match !== undefined) {\n                var match$1 = match[/* highscore */9];\n                tmp = match$1 !== undefined ? React.createElement(\"p\", undefined, Curry._1(Printf.sprintf(/* Format */[\n                                /* String_literal */Block.__(11, [\n                                    \"Highscore: \",\n                                    /* Int */Block.__(4, [\n                                        /* Int_d */0,\n                                        /* No_padding */0,\n                                        /* No_precision */0,\n                                        /* End_of_format */0\n                                      ])\n                                  ]),\n                                \"Highscore: %d\"\n                              ]), match$1)) : null;\n              } else {\n                tmp = null;\n              }\n              var match$2 = self[/* state */1][/* data */3];\n              var tmp$1;\n              if (match$2 !== undefined) {\n                var match$3 = match$2[/* highscore */9];\n                tmp$1 = match$3 !== undefined ? React.createElement(\"button\", {\n                        className: Glamor.css(/* :: */[\n                              Glamor.padding(\"10px\"),\n                              /* [] */0\n                            ]),\n                        onClick: (function (_e) {\n                            return Curry._1(self[/* send */3], /* WipeSave */1);\n                          })\n                      }, Printf.sprintf(/* Format */[\n                            /* String_literal */Block.__(11, [\n                                \"Wipe Save\",\n                                /* End_of_format */0\n                              ]),\n                            \"Wipe Save\"\n                          ])) : null;\n              } else {\n                tmp$1 = null;\n              }\n              return React.createElement(\"div\", {\n                          className: Glamor.css(/* :: */[\n                                Glamor.display(\"flex\"),\n                                /* :: */[\n                                  Glamor.alignItems(\"center\"),\n                                  /* :: */[\n                                    Glamor.flexDirection(\"column\"),\n                                    /* [] */0\n                                  ]\n                                ]\n                              ])\n                        }, React.createElement(\"canvas\", {\n                              className: Glamor.css(/* :: */[\n                                    /* Selector */Block.__(1, [\n                                        \":not(:fullscreen)\",\n                                        /* :: */[\n                                          Glamor.display(\"none\"),\n                                          /* [] */0\n                                        ]\n                                      ]),\n                                    /* :: */[\n                                      /* Selector */Block.__(1, [\n                                          \":not(:-webkit-full-screen)\",\n                                          /* :: */[\n                                            Glamor.display(\"none\"),\n                                            /* [] */0\n                                          ]\n                                        ]),\n                                      /* [] */0\n                                    ]\n                                  ]),\n                              id: \"canvas\",\n                              height: String(320),\n                              width: String(640),\n                              onMouseDown: (function (_e) {\n                                  return Curry._1(self[/* send */3], /* KeyDown */4);\n                                }),\n                              onMouseUp: (function (_e) {\n                                  return Curry._1(self[/* send */3], /* KeyUp */3);\n                                }),\n                              onTouchEnd: (function (_e) {\n                                  return Curry._1(self[/* send */3], /* KeyUp */3);\n                                }),\n                              onTouchStart: (function (_e) {\n                                  return Curry._1(self[/* send */3], /* KeyDown */4);\n                                })\n                            }), React.createElement(\"div\", {\n                              className: Glamor.css(/* :: */[\n                                    Glamor.display(\"flex\"),\n                                    /* :: */[\n                                      Glamor.alignItems(\"center\"),\n                                      /* :: */[\n                                        Glamor.flexDirection(\"column\"),\n                                        /* [] */0\n                                      ]\n                                    ]\n                                  ])\n                            }, React.createElement(\"div\", {\n                                  className: Glamor.css(/* :: */[\n                                        Glamor.display(\"flex\"),\n                                        /* :: */[\n                                          Glamor.alignItems(\"center\"),\n                                          /* :: */[\n                                            Glamor.flexDirection(\"column\"),\n                                            /* :: */[\n                                              Glamor.textAlign(\"justify\"),\n                                              /* :: */[\n                                                Glamor.maxWidth(\"600px\"),\n                                                /* :: */[\n                                                  /* Selector */Block.__(1, [\n                                                      \"@media (max-width: 600px)\",\n                                                      /* :: */[\n                                                        Glamor.maxWidth(\"80vw\"),\n                                                        /* [] */0\n                                                      ]\n                                                    ]),\n                                                  /* :: */[\n                                                    Glamor.padding(\"10px\"),\n                                                    /* [] */0\n                                                  ]\n                                                ]\n                                              ]\n                                            ]\n                                          ]\n                                        ]\n                                      ])\n                                }, React.createElement(\"p\", undefined, \"Runner\"), tmp, React.createElement(\"button\", {\n                                      className: Glamor.css(/* :: */[\n                                            Glamor.padding(\"10px\"),\n                                            /* [] */0\n                                          ]),\n                                      onClick: (function (_e) {\n                                          Dom_html.requestFullscreenElement(\"canvas\");\n                                          return Curry._1(self[/* send */3], /* Fullscreen */[true]);\n                                        })\n                                    }, \"Run! (Fullscreen)\"), tmp$1, React.createElement(\"p\", {\n                                      className: Glamor.css(/* :: */[\n                                            Glamor.fontSize(\"0.7rem\"),\n                                            /* [] */0\n                                          ])\n                                    }, \"Warning! Persons (or cats) playing this game may experience severe side effects.You may or may not be excited. Your highscore is all that matters -- make it count.\"), React.createElement(\"div\", {\n                                      className: Glamor.css(/* :: */[\n                                            Glamor.fontSize(\"0.5rem\"),\n                                            /* :: */[\n                                              Glamor.textAlign(\"center\"),\n                                              /* [] */0\n                                            ]\n                                          ])\n                                    }, $$Array.mapi((function (i, s) {\n                                            return React.createElement(\"p\", {\n                                                        key: String(i),\n                                                        dangerouslySetInnerHTML: {\n                                                          __html: s\n                                                        }\n                                                      });\n                                          }), /* array */[\n                                          \"Copyright (c) 2019 Eldad Zack <eldad@fogrefinery.com>\",\n                                          \"+++\",\n                                          \"Pixel Art from OpenGameArt.org by <a href=https://opengameart.org/users/grafxkid>Jason Mercado (GrafixKid)</a>\"\n                                        ])))));\n            }),\n          /* initialState */initialState,\n          /* retainedProps */component[/* retainedProps */11],\n          /* reducer */(function (action, state) {\n              var match = state[/* data */3];\n              if (typeof action === \"number\") {\n                switch (action) {\n                  case 0 : \n                      return /* Update */Block.__(0, [/* record */[\n                                  /* start */true,\n                                  /* fullscreen */state[/* fullscreen */1],\n                                  /* last_tick */state[/* last_tick */2],\n                                  /* data */GameState.initialState(/* () */0)\n                                ]]);\n                  case 1 : \n                      return /* UpdateWithSideEffects */Block.__(2, [\n                                /* record */[\n                                  /* start */state[/* start */0],\n                                  /* fullscreen */state[/* fullscreen */1],\n                                  /* last_tick */state[/* last_tick */2],\n                                  /* data */GameState.initialState(/* () */0)\n                                ],\n                                (function (_self) {\n                                    localStorage.clear();\n                                    return /* () */0;\n                                  })\n                              ]);\n                  case 2 : \n                      var now = Date.now() / 1000.0;\n                      var match$1 = state[/* last_tick */2];\n                      if (match$1 !== undefined) {\n                        var delta_t = now - match$1;\n                        var init = handleTick(state, delta_t);\n                        return /* Update */Block.__(0, [/* record */[\n                                    /* start */init[/* start */0],\n                                    /* fullscreen */init[/* fullscreen */1],\n                                    /* last_tick */now,\n                                    /* data */init[/* data */3]\n                                  ]]);\n                      } else {\n                        return /* Update */Block.__(0, [/* record */[\n                                    /* start */state[/* start */0],\n                                    /* fullscreen */state[/* fullscreen */1],\n                                    /* last_tick */now,\n                                    /* data */state[/* data */3]\n                                  ]]);\n                      }\n                  case 3 : \n                      if (match !== undefined && state[/* fullscreen */1]) {\n                        return /* Update */Block.__(0, [/* record */[\n                                    /* start */state[/* start */0],\n                                    /* fullscreen */state[/* fullscreen */1],\n                                    /* last_tick */state[/* last_tick */2],\n                                    /* data */GameState.handleKeyUp(match)\n                                  ]]);\n                      } else {\n                        return /* NoUpdate */0;\n                      }\n                  case 4 : \n                      if (match !== undefined && state[/* fullscreen */1]) {\n                        return /* Update */Block.__(0, [/* record */[\n                                    /* start */state[/* start */0],\n                                    /* fullscreen */state[/* fullscreen */1],\n                                    /* last_tick */state[/* last_tick */2],\n                                    /* data */GameState.handleKeyDown(match)\n                                  ]]);\n                      } else {\n                        return /* NoUpdate */0;\n                      }\n                  \n                }\n              } else {\n                return /* Update */Block.__(0, [/* record */[\n                            /* start */state[/* start */0],\n                            /* fullscreen */action[0],\n                            /* last_tick */state[/* last_tick */2],\n                            /* data */state[/* data */3]\n                          ]]);\n              }\n            }),\n          /* jsElementWrapped */component[/* jsElementWrapped */13]\n        ];\n}\n\nvar debug = false;\n\nvar canvas_width = 640;\n\nvar canvas_height = 320;\n\nvar minimum_tick = 0.1;\n\nexport {\n  debug ,\n  canvas_width ,\n  canvas_height ,\n  minimum_tick ,\n  handleTick ,\n  initialState ,\n  component ,\n  make ,\n  \n}\n/*  Not a pure module */\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","// Generated by BUCKLESCRIPT VERSION 4.0.7, PLEASE EDIT WITH CARE\n\nimport * as App from \"./App\";\nimport * as ReactDOMRe from \"reason-react/src/ReactDOMRe.js\";\nimport * as ReasonReact from \"reason-react/src/ReasonReact.js\";\nimport * as ServiceWorker from \"./serviceWorker\";\n\n((require('./index.css')));\n\nReactDOMRe.renderToElementWithId(ReasonReact.element(undefined, undefined, App.make(/* array */[])), \"root\");\n\nServiceWorker.register();\n\nexport {\n  \n}\n/*  Not a pure module */\n"],"sourceRoot":""}